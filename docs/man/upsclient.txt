UPSCLIENT(3)
============

NAME
----

upsclient - Network UPS Tools client access library

DESCRIPTION
-----------

The Network UPS Tools (NUT) *upsclient* library provides a number of
useful functions for programs to use when communicating with
linknut:upsd[8].  Many of the low-level socket and protocol details are
handled automatically when using this interface.

State is maintained across calls in an opaque structure called `UPSCONN`.
Callers are expected to create one per connection.  These will be
provided to most of the *upsclient* functions.  The format of this
structure is subject to change, and client programs must not reference
elements within it directly.

NETWORK FUNCTIONS
-----------------

To create a new connection, use linknut:upscli_connect[3].  This will also
initialize the `UPSCONN` structure.  To verify that a connection has been
established later, linknut:upscli_fd[3] can be used to return the
file descriptor.  Clients wishing to check for the presence and
operation of SSL on a connection may call linknut:upscli_ssl[3].

The majority of clients will use linknut:upscli_get[3] to retrieve single
items from the server.  To retrieve a list, use
linknut:upscli_list_start[3] to get it started, then call
linknut:upscli_list_next[3] for each element.

Raw lines of text may be sent to linknut:upsd[8] with
linknut:upscli_sendline[3].  Reading raw lines is possible with
linknut:upscli_readline[3].  Client programs are expected to format these
lines according to the protocol, as no checking will be performed before
transmission.

At the end of a connection, you must call linknut:upsclient_disconnect[3]
to disconnect from *upsd* and release any dynamic memory associated
with the `UPSCONN` structure.  Failure to call this function will result
in memory and file descriptor leaks in your program.

ERROR HANDLING
--------------
In the event of an error, linknut:upscli_strerror[3] will provide
human-readable details on what happened.  linknut:upscli_upserror[3] may
also be used to retrieve the error number.  These numbers are defined in
*upsclient.h* as 'UPSCLI_ERR_*'.

SEE ALSO
--------
linknut:libupsclient-config[1],
linknut:upscli_connect[3], linknut:upscli_disconnect[3], linknut:upscli_fd[3],
linknut:upscli_getvar[3], linknut:upscli_list_next[3], 
linknut:upscli_list_start[3], linknut:upscli_readline[3], 
linknut:upscli_sendline[3], 
linknut:upscli_splitaddr[3], linknut:upscli_splitname[3], 
linknut:upscli_ssl[3], linknut:upscli_strerror[3], 
linknut:upscli_upserror[3]
